# pegasocks

æ˜¯ä¸€ä¸ªåŸºäº socks5 åè®®çš„ä»£ç†å®¢æˆ·ç«¯ï¼Œæ„å›¾åœ¨äºæ”¯æŒå¤šç§ç±»å‹çš„ä»£ç†æœåŠ¡ã€‚
C è¯­è¨€ç¼–å†™ï¼Œè½»é‡ï¼Œæ”¯æŒç±» unix ç³»ç»Ÿã€‚

âš ï¸ è¿™æ˜¯ä¸€ä¸ªæ­£åœ¨å¼€å‘ä¸­çš„é¡¹ç›®ï¼Œè¯·è‡ªè¡Œè€ƒè™‘ä½¿ç”¨æˆæœ¬å’Œé£é™©ã€‚

## ç‰¹ç‚¹

ä¸å…¶ä»–å¤§å¤šæ•°æ”¯æŒå¤šåè®®çš„å®¢æˆ·ç«¯ä¸åŒï¼Œpegasocks ä¸ä¾èµ–å„ç§ç¬¬ä¸‰æ–¹ core(æ¯”å¦‚ v2ray-core ç­‰)ï¼Œè€Œæ˜¯çœŸçš„å»å®ç°ç›¸å…³åè®®çš„æ‹†è£…ï¼Œå¹¶ä¸”å°½å¯èƒ½çš„ç…§é¡¾æ€§èƒ½ã€‚å› æ­¤å®ƒ

1. ğŸƒ è¶³å¤Ÿè½»é‡ï¼Œæ²¡æœ‰ QT æˆ–æ˜¯ boost æˆ–æ˜¯å…¶ä»–ç¬¬ä¸‰æ–¹äºŒè¿›åˆ¶çš„ä¾èµ–ï¼Œå› æ­¤èµ„æºå ç”¨ä½ã€‚
2. ğŸš€ æ€§èƒ½ä¼˜å…ˆï¼Œé»˜è®¤å¤šä¸ª worker çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸€ä¸ª event loopï¼Œå› æ­¤ç†è®ºä¸Šååé‡ä¼šæ¯”è¾ƒé«˜ï¼ˆå¾…benchmarkï¼‰
3. ğŸš¥ è¿™æ˜¯ä¸€ä¸ª learn by doing é¡¹ç›®ï¼Œæ¬¢è¿å¤§å®¶ review ä»£ç ï¼Œæä¾›ä¼˜åŒ–æ€è·¯å’Œ C è¯­è¨€ç¼–ç¨‹ç›¸å…³çš„æŒ‡å¯¼ã€‚
4. âŒ æ²¡æœ‰ GUIï¼Œå¯ä»¥ç›´æ¥é…åˆ systemd, launchd, rc æˆ–æ˜¯å„ç§è‡ªå®šä¹‰è„šæœ¬é…ç½®å¼€æœºå¯åŠ¨ã€‚åæœŸè®¡åˆ’å¼€å‘ä¸€ä¸ªç®€å•çš„ tray indicatorï¼Œåœ¨ç³»ç»Ÿçš„æ‰˜ç›˜é‡Œæ˜¾ç¤ºï¼Œå¹¶ä¸”æä¾›ä¸€äº›ç®€å•çš„äº¤äº’ï¼Œæ€»ä¹‹é‡å‹çš„ GUI æ˜¯ä¸åœ¨è€ƒè™‘èŒƒå›´å†…çš„ã€‚

## ä¾èµ–

- openssl 1.1.1
- libevent2
- json-c

## ç¼–è¯‘

> mkdir build && cd build
>
> cmake .. && make

## è¿è¡Œ

> pegas -c config.json -t 4

- `-c` æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºåŒç›®å½•ä¸‹ config.json
- `-t` æŒ‡å®šå·¥ä½œçº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤ä¸º 4

## é…ç½®

è§[é…ç½®æ–‡æ¡£](https://github.com/chux0519/pegasocks/wiki/%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E)

## å¼€å‘è®¡åˆ’

- å¤šç§åè®®æ”¯æŒ
  - [x] trojan
    - [x] trojan-gfw
    - [x] trojan-go
  - [x] v2ray
    - [x] vmess
    - [x] tcp
    - [x] websocket
    - [x] tls + websocket
- control pannel
  - [ ] è®¾ç½®å½“å‰æœåŠ¡å™¨
  - [ ] æ”¶é›†æœåŠ¡å™¨çš„ metrics
  - [ ] é‡å¯æœåŠ¡
- è´Ÿè½½å‡è¡¡(control pannel å®Œæˆåå¯ä»¥ä½¿ç”¨å…¶ä»–è¯­è¨€ã€æŠ€æœ¯è¿›è¡Œç¼–å†™)
- å¹³å°é€‚é…
  - [x] linux
  - [x] osx
  - [ ] FreeBSDï¼ˆå¾…æµ‹è¯•ï¼Œåº”è¯¥å¯ä»¥ç›´æ¥æ”¯æŒï¼‰
  - [ ] windowsï¼ˆå¾…æµ‹è¯•ï¼Œå¯èƒ½éœ€è¦ pthread çš„æ”¯æŒ)
